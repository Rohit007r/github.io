<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ðŸ“‹ Task Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f8f9fa; }
    h2 { color: #333; }
    input, select, button { margin: 5px; padding: 6px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #f0f0f0; }
  </style>
</head>
<body>
  <h2>ðŸ“‹ Task Distribution Dashboard</h2>

  <div>
    <input id="taskId" placeholder="Task ID" />
    <input id="taskTitle" placeholder="Task Title" />
    <input id="assignedTo" placeholder="Assigned To" />
    <select id="status">
      <option value="Pending">Pending</option>
      <option value="In Progress">In Progress</option>
      <option value="Completed">Completed</option>
    </select>
    <input id="dueDate" type="date" />
    <input id="notes" placeholder="Notes" />
    <button onclick="addTask()">âž• Add Task</button>
  </div>

  <table id="taskTable">
    <thead>
      <tr>
        <th>Task ID</th>
        <th>Task Title</th>
        <th>Assigned To</th>
        <th>Status</th>
        <th>Due Date</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbz2foTSpfgq1ODclMS0XXxOmlaExljnJh2ed4T3Vx0U78LenLJGtROdPvqcW2HJ9je8/exec";

    function addTask() {
      const data = {
        action: "addTask",
        taskId: document.getElementById("taskId").value,
        taskTitle: document.getElementById("taskTitle").value,
        assignedTo: document.getElementById("assignedTo").value,
        status: document.getElementById("status").value,
        dueDate: document.getElementById("dueDate").value,
        notes: document.getElementById("notes").value
      };

      fetch(API_URL, {
        method: "POST",
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(json => {
        alert(json.message || "Task Added!");
        loadTasks();
      })
      .catch(err => alert("Error: " + err));
    }

    function loadTasks() {
      fetch(API_URL, {
        method: "POST",
        body: JSON.stringify({ action: "getTasks" })
      })
      .then(response => response.json())
      .then(json => {
        const table = document.querySelector("#taskTable tbody");
        table.innerHTML = "";
        json.tasks.forEach(task => {
          const row = `
            <tr>
              <td>${task["Task ID"]}</td>
              <td>${task["Task Title"]}</td>
              <td>${task["Assigned To"]}</td>
              <td>${task["Status"]}</td>
              <td>${task["Due Date"]}</td>
              <td>${task["Notes"]}</td>
            </tr>
          `;
          table.innerHTML += row;
        });
      });
    }

    // Load tasks on page load
    loadTasks();
  </script>
</body>
</html>
